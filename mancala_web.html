<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mancala - AI vs Human</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            overflow-x: hidden;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // API Configuration
        const API_URL = 'http://localhost:5000/api';

        const Sparkles = ({ size = 32, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <path d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707" />
                <circle cx="12" cy="12" r="3" />
            </svg>
        );

        const Users = ({ size = 40, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
                <circle cx="9" cy="7" r="4" />
                <path d="M23 21v-2a4 4 0 0 0-3-3.87m-4-12a4 4 0 0 1 0 7.75" />
            </svg>
        );

        const Cpu = ({ size = 40, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <rect x="4" y="4" width="16" height="16" rx="2" ry="2" />
                <rect x="9" y="9" width="6" height="6" />
                <line x1="9" y1="1" x2="9" y2="4" />
                <line x1="15" y1="1" x2="15" y2="4" />
                <line x1="9" y1="20" x2="9" y2="23" />
                <line x1="15" y1="20" x2="15" y2="23" />
                <line x1="20" y1="9" x2="23" y2="9" />
                <line x1="20" y1="14" x2="23" y2="14" />
                <line x1="1" y1="9" x2="4" y2="9" />
                <line x1="1" y1="14" x2="4" y2="14" />
            </svg>
        );

        const Pause = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <rect x="6" y="4" width="4" height="16" />
                <rect x="14" y="4" width="4" height="16" />
            </svg>
        );

        const Play = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polygon points="5 3 19 12 5 21 5 3" fill="currentColor" />
            </svg>
        );

        const X = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="18" y1="6" x2="6" y2="18" />
                <line x1="6" y1="6" x2="18" y2="18" />
            </svg>
        );

        const MancalaGame = () => {
            const [screen, setScreen] = useState('menu');
            const [gameMode, setGameMode] = useState('human');
            const [difficulty, setDifficulty] = useState('medium');
            const [currentPlayer, setCurrentPlayer] = useState('player1');
            const [thinking, setThinking] = useState(false);
            const [paused, setPaused] = useState(false);
            const [message, setMessage] = useState('');
            const [winner, setWinner] = useState(null);
            const [connected, setConnected] = useState(false);
            const [error, setError] = useState('');
            const gameIdRef = useRef(`game_${Date.now()}`);
            
            const [board, setBoard] = useState({
                A: 4, B: 4, C: 4, D: 4, E: 4, F: 4,
                G: 4, H: 4, I: 4, J: 4, K: 4, L: 4,
                1: 0,
                2: 0
            });

            // Check server connection on mount
            useEffect(() => {
                checkServerConnection();
            }, []);

            const checkServerConnection = async () => {
                try {
                    const response = await fetch('http://localhost:5000/health');
                    if (response.ok) {
                        setConnected(true);
                        setError('');
                    } else {
                        setConnected(false);
                        setError('Server responded but not healthy');
                    }
                } catch (err) {
                    setConnected(false);
                    setError('Cannot connect to Flask server. Please start server.py first!');
                }
            };

            const getDepth = () => {
                if (difficulty === 'easy') return 3;
                if (difficulty === 'medium') return 6;
                return 9;
            };

            const startGame = async () => {
                if (!connected) {
                    alert('Please start the Flask server first!\n\nRun: python server.py');
                    return;
                }

                try {
                    gameIdRef.current = `game_${Date.now()}`;
                    
                    const response = await fetch(`${API_URL}/new-game`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            gameId: gameIdRef.current,
                            mode: gameMode,
                            depth: getDepth()
                        })
                    });

                    const data = await response.json();
                    
                    if (data.success) {
                        setBoard(data.board);
                        setCurrentPlayer('player1');
                        setMessage('');
                        setWinner(null);
                        setPaused(false);
                        setScreen('game');
                        
                        // If AI vs AI, start first move
                        if (gameMode === 'ai') {
                            setTimeout(() => aiMove('player1'), 500);
                        }
                    } else {
                        alert('Failed to start game: ' + data.error);
                    }
                } catch (err) {
                    alert('Error connecting to server: ' + err.message);
                }
            };

            const exitGame = async () => {
                try {
                    await fetch(`${API_URL}/delete-game/${gameIdRef.current}`, {
                        method: 'DELETE'
                    });
                } catch (err) {
                    console.error('Error deleting game:', err);
                }
                
                setScreen('menu');
                setPaused(false);
                setThinking(false);
            };

            const togglePause = () => {
                setPaused(!paused);
            };

            const aiMove = async (player) => {
                if (paused) return;
                
                setThinking(true);
                const computerName = player === 'player1' ? 'COMPUTER1' : 'COMPUTER2';
                
                try {
                    const heuristicVersion = (gameMode === 'ai' && player === 'player2') ? 2 : 1;
                    
                    const response = await fetch(`${API_URL}/ai-move`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            gameId: gameIdRef.current,
                            currentPlayer: player,
                            heuristicVersion: heuristicVersion
                        })
                    });

                    const data = await response.json();
                    
                    if (data.success) {
                        setBoard(data.board);
                        setMessage(`${computerName} played ${data.move} (eval: ${data.value})`);
                        setThinking(false);
                        
                        if (data.gameOver) {
                            handleGameOver(data.winner);
                        } else {
                            const nextPlayer = player === 'player1' ? 'player2' : 'player1';
                            setCurrentPlayer(nextPlayer);
                            
                            // Schedule next move
                            if (gameMode === 'ai') {
                                setTimeout(() => aiMove(nextPlayer), 800);
                            }
                        }
                    } else {
                        setThinking(false);
                        if (data.gameOver) {
                            // No moves available, game over
                            const response2 = await fetch(`${API_URL}/game-state/${gameIdRef.current}`);
                            const stateData = await response2.json();
                            if (stateData.success) {
                                setBoard(stateData.board);
                                checkGameOverManually(stateData.board);
                            }
                        }
                    }
                } catch (err) {
                    setThinking(false);
                    setMessage('Error: ' + err.message);
                }
            };

            const handlePitClick = async (pit) => {
                if (screen !== 'game' || thinking || winner || paused) return;
                if (gameMode === 'human' && currentPlayer === 'player2') return;
                if (gameMode === 'ai') return;
                
                const player1Pits = ['A', 'B', 'C', 'D', 'E', 'F'];
                if (!player1Pits.includes(pit)) return;
                if (board[pit] === 0) return;
                
                try {
                    const response = await fetch(`${API_URL}/human-move`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            gameId: gameIdRef.current,
                            pit: pit
                        })
                    });

                    const data = await response.json();
                    
                    if (data.success) {
                        setBoard(data.board);
                        setMessage(`You played ${pit}`);
                        
                        if (data.gameOver) {
                            handleGameOver(data.winner);
                        } else {
                            setCurrentPlayer('player2');
                            setTimeout(() => aiMove('player2'), 800);
                        }
                    } else {
                        setMessage('Invalid move: ' + data.error);
                    }
                } catch (err) {
                    setMessage('Error: ' + err.message);
                }
            };

            const handleGameOver = (winnerInfo) => {
                if (!winnerInfo) return;
                
                const { winner, player1Score, player2Score } = winnerInfo;
                
                if (winner === 'TIE') {
                    setWinner(`It's a TIE! Both scored ${player1Score} seeds`);
                } else if (gameMode === 'human') {
                    if (winner === 'HUMAN') {
                        setWinner(`YOU WIN! Score: ${player1Score}`);
                    } else {
                        setWinner(`Computer WINS! Score: ${player2Score}`);
                    }
                } else {
                    const winnerNum = winner === 'COMPUTER1' ? '1' : '2';
                    const winnerScore = winner === 'COMPUTER1' ? player1Score : player2Score;
                    setWinner(`COMPUTER ${winnerNum} WINS! Score: ${winnerScore}`);
                }
                
                setScreen('gameover');
            };

            const checkGameOverManually = (currentBoard) => {
                const player1Pits = ['A', 'B', 'C', 'D', 'E', 'F'];
                const player2Pits = ['G', 'H', 'I', 'J', 'K', 'L'];
                
                const player1Empty = player1Pits.every(p => currentBoard[p] === 0);
                const player2Empty = player2Pits.every(p => currentBoard[p] === 0);
                
                if (player1Empty || player2Empty) {
                    const score1 = currentBoard[1];
                    const score2 = currentBoard[2];
                    
                    handleGameOver({
                        winner: score1 > score2 ? 'COMPUTER1' : (score2 > score1 ? 'COMPUTER2' : 'TIE'),
                        player1Score: score1,
                        player2Score: score2
                    });
                }
            };

            const SeedDots = ({ count }) => {
                if (count === 0) return null;
                
                const positions = [];
                if (count === 1) {
                    positions.push({ x: 50, y: 50 });
                } else if (count === 2) {
                    positions.push({ x: 35, y: 50 }, { x: 65, y: 50 });
                } else if (count === 3) {
                    positions.push({ x: 35, y: 40 }, { x: 65, y: 40 }, { x: 50, y: 60 });
                } else if (count === 4) {
                    positions.push({ x: 35, y: 35 }, { x: 65, y: 35 }, { x: 35, y: 65 }, { x: 65, y: 65 });
                } else {
                    const angleStep = (2 * Math.PI) / Math.min(count, 8);
                    for (let i = 0; i < Math.min(count, 8); i++) {
                        const angle = i * angleStep - Math.PI / 2;
                        positions.push({
                            x: 50 + Math.cos(angle) * 30,
                            y: 50 + Math.sin(angle) * 30
                        });
                    }
                }
                
                const colors = ['#FFB800', '#FFAA33', '#FF8C00', '#FFC850', '#E6A014'];
                
                return (
                    <>
                        {positions.map((pos, i) => (
                            <circle
                                key={i}
                                cx={pos.x}
                                cy={pos.y}
                                r="6"
                                fill={colors[i % colors.length]}
                                stroke="#000"
                                strokeWidth="0.5"
                            />
                        ))}
                    </>
                );
            };

            if (screen === 'menu') {
                return (
                    <div style={{
                        minHeight: '100vh',
                        display: 'flex',
                        alignItems: 'center',
                        justifyContent: 'center',
                        padding: '1rem',
                        background: 'linear-gradient(to bottom, #2D1941, #4B2D6B, #5A3578)'
                    }}>
                        <div style={{
                            width: '100%',
                            maxWidth: '42rem',
                            background: 'linear-gradient(to bottom right, rgba(88,28,135,0.4), rgba(91,33,182,0.4))',
                            borderRadius: '1.5rem',
                            padding: '2rem',
                            boxShadow: '0 25px 50px -12px rgba(0,0,0,0.5)',
                            border: '1px solid rgba(126,34,206,0.3)'
                        }}>
                            {/* Server Status */}
                            <div style={{
                                marginBottom: '1.5rem',
                                padding: '1rem',
                                borderRadius: '0.75rem',
                                background: connected ? 'rgba(16,185,129,0.2)' : 'rgba(239,68,68,0.2)',
                                border: `2px solid ${connected ? '#10B981' : '#EF4444'}`,
                                textAlign: 'center'
                            }}>
                                <div style={{ 
                                    color: connected ? '#10B981' : '#EF4444',
                                    fontWeight: 'bold',
                                    fontSize: '1rem',
                                    marginBottom: '0.25rem'
                                }}>
                                    {connected ? '‚úÖ Server Connected' : '‚ùå Server Disconnected'}
                                </div>
                                {!connected && (
                                    <div style={{ color: '#FCA5A5', fontSize: '0.875rem' }}>
                                        Run: python server.py
                                        <button 
                                            onClick={checkServerConnection}
                                            style={{
                                                marginLeft: '0.5rem',
                                                padding: '0.25rem 0.75rem',
                                                borderRadius: '0.5rem',
                                                background: '#EF4444',
                                                color: 'white',
                                                border: 'none',
                                                cursor: 'pointer',
                                                fontSize: '0.75rem'
                                            }}
                                        >
                                            Retry
                                        </button>
                                    </div>
                                )}
                            </div>

                            <div style={{ textAlign: 'center', marginBottom: '2rem' }}>
                                <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '0.75rem', marginBottom: '0.5rem' }}>
                                    <Sparkles size={32} className="sparkles" />
                                    <h1 style={{ 
                                        fontSize: '4.5rem', 
                                        fontWeight: 'bold', 
                                        color: '#FFC107',
                                        textShadow: '0 0 30px rgba(255,191,0,0.5)',
                                        margin: 0
                                    }}>
                                        MANCALA
                                    </h1>
                                    <Sparkles size={32} className="sparkles" />
                                </div>
                                <p style={{ color: '#E9D5FF', fontSize: '1.125rem' }}>Ancient Strategy ‚Ä¢ Modern AI ‚Ä¢ Beautiful Design</p>
                                <p style={{ color: '#A78BFA', fontSize: '0.875rem', marginTop: '0.5rem' }}>
                                    üß† Powered by Minimax Alpha-Beta Pruning
                                </p>
                            </div>

                            <div style={{ marginBottom: '2rem' }}>
                                <h2 style={{ color: 'white', fontSize: '1.5rem', marginBottom: '1rem', fontWeight: '600' }}>Choose Game Mode</h2>
                                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '1rem' }}>
                                    <button
                                        onClick={() => setGameMode('human')}
                                        style={{
                                            padding: '1.5rem',
                                            borderRadius: '1rem',
                                            border: gameMode === 'human' ? '2px solid #22D3EE' : '2px solid #7C3AED',
                                            background: gameMode === 'human' ? 'rgba(109,40,217,0.5)' : 'rgba(109,40,217,0.3)',
                                            color: 'white',
                                            cursor: 'pointer',
                                            transition: 'all 0.3s',
                                            boxShadow: gameMode === 'human' ? '0 0 20px rgba(34,211,238,0.5)' : 'none'
                                        }}
                                    >
                                        <Users size={40} className="icon-cyan" style={{ display: 'block', margin: '0 auto 0.75rem' }} />
                                        <div style={{ fontSize: '1.25rem', fontWeight: '600', marginBottom: '0.25rem' }}>Human vs AI</div>
                                        <div style={{ color: '#D8B4FE', fontSize: '0.875rem' }}>Test your skills</div>
                                    </button>

                                    <button
                                        onClick={() => setGameMode('ai')}
                                        style={{
                                            padding: '1.5rem',
                                            borderRadius: '1rem',
                                            border: gameMode === 'ai' ? '2px solid #22D3EE' : '2px solid #7C3AED',
                                            background: gameMode === 'ai' ? 'rgba(109,40,217,0.5)' : 'rgba(109,40,217,0.3)',
                                            color: 'white',
                                            cursor: 'pointer',
                                            transition: 'all 0.3s',
                                            boxShadow: gameMode === 'ai' ? '0 0 20px rgba(34,211,238,0.5)' : 'none'
                                        }}
                                    >
                                        <Cpu size={40} className="icon-cyan" style={{ display: 'block', margin: '0 auto 0.75rem' }} />
                                        <div style={{ fontSize: '1.25rem', fontWeight: '600', marginBottom: '0.25rem' }}>AI vs AI</div>
                                        <div style={{ color: '#D8B4FE', fontSize: '0.875rem' }}>Watch & learn</div>
                                    </button>
                                </div>
                            </div>

                            <div style={{ marginBottom: '2rem' }}>
                                <h2 style={{ color: 'white', fontSize: '1.5rem', marginBottom: '1rem', fontWeight: '600' }}>
                                    Difficulty: {difficulty.charAt(0).toUpperCase() + difficulty.slice(1)}
                                </h2>
                                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr 1fr', gap: '1rem' }}>
                                    {['easy', 'medium', 'hard'].map((level) => (
                                        <button
                                            key={level}
                                            onClick={() => setDifficulty(level)}
                                            style={{
                                                padding: '1rem',
                                                borderRadius: '0.75rem',
                                                border: difficulty === level ? '2px solid #FFC107' : '2px solid #7C3AED',
                                                background: difficulty === level ? 'linear-gradient(to right, #F59E0B, #EF6C00)' : 'rgba(109,40,217,0.3)',
                                                color: difficulty === level ? '#2D1941' : 'white',
                                                cursor: 'pointer',
                                                transition: 'all 0.3s',
                                                fontWeight: difficulty === level ? 'bold' : 'normal',
                                                boxShadow: difficulty === level ? '0 10px 40px rgba(245,158,11,0.4)' : 'none'
                                            }}
                                        >
                                            <div style={{ fontWeight: '600', fontSize: '1.125rem' }}>{level.charAt(0).toUpperCase() + level.slice(1)}</div>
                                            <div style={{ fontSize: '0.875rem', opacity: 0.8 }}>Depth {getDepth()}</div>
                                        </button>
                                    ))}
                                </div>
                            </div>

                            <button
                                onClick={startGame}
                                disabled={!connected}
                                style={{
                                    width: '100%',
                                    padding: '1rem',
                                    borderRadius: '1rem',
                                    color: 'white',
                                    fontSize: '1.5rem',
                                    fontWeight: 'bold',
                                    border: 'none',
                                    cursor: connected ? 'pointer' : 'not-allowed',
                                    background: connected ? 'linear-gradient(to right, #A855F7, #EC4899)' : 'rgba(107,114,128,0.5)',
                                    boxShadow: connected ? '0 10px 40px rgba(168,85,247,0.4)' : 'none',
                                    transition: 'all 0.3s',
                                    opacity: connected ? 1 : 0.5
                                }}
                            >
                                {connected ? 'Start Game' : 'Server Required'}
                            </button>

                            <p style={{ textAlign: 'center', color: '#C084FC', fontSize: '0.875rem', marginTop: '1.5rem', lineHeight: '1.5' }}>
                                Master 1, Visual Computing - USTHB 2025/2026<br />
                                Problem Solving Course Project
                            </p>
                        </div>
                    </div>
                );
            }

            if (screen === 'game' || screen === 'gameover') {
                return (
                    <div style={{
                        minHeight: '100vh',
                        display: 'flex',
                        alignItems: 'center',
                        justifyContent: 'center',
                        padding: '1rem',
                        background: 'linear-gradient(to bottom, #2D1941, #4B2D6B, #5A3578)'
                    }}>
                        <div style={{ width: '100%', maxWidth: '80rem' }}>
                            {/* Control Bar */}
                            <div style={{ 
                                display: 'flex', 
                                justifyContent: 'space-between', 
                                alignItems: 'center',
                                marginBottom: '1rem',
                                gap: '1rem'
                            }}>
                                <button
                                    onClick={exitGame}
                                    style={{
                                        display: 'flex',
                                        alignItems: 'center',
                                        gap: '0.5rem',
                                        padding: '0.75rem 1.5rem',
                                        borderRadius: '0.75rem',
                                        background: 'rgba(239,68,68,0.8)',
                                        color: 'white',
                                        border: 'none',
                                        cursor: 'pointer',
                                        fontSize: '1rem',
                                        fontWeight: '600',
                                        transition: 'all 0.3s'
                                    }}
                                >
                                    <X size={20} />
                                    Exit to Menu
                                </button>

                                <div style={{
                                    background: 'linear-gradient(to right, rgba(88,28,135,0.6), rgba(91,33,182,0.6))',
                                    borderRadius: '1rem',
                                    padding: '1rem',
                                    flex: 1,
                                    textAlign: 'center',
                                    border: '1px solid rgba(126,34,206,0.3)'
                                }}>
                                    {thinking ? (
                                        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '0.75rem' }}>
                                            <div style={{
                                                width: '1.5rem',
                                                height: '1.5rem',
                                                border: '2px solid white',
                                                borderTopColor: 'transparent',
                                                borderRadius: '50%',
                                                animation: 'spin 1s linear infinite'
                                            }}></div>
                                            <span style={{ color: 'white', fontSize: '1.25rem' }}>
                                                {currentPlayer === 'player1' ? 'COMPUTER1' : 'COMPUTER2'} is thinking...
                                            </span>
                                        </div>
                                    ) : paused ? (
                                        <span style={{ color: '#FFC107', fontSize: '1.25rem', fontWeight: '600' }}>
                                            ‚è∏Ô∏è PAUSED
                                        </span>
                                    ) : (
                                        <span style={{ color: 'white', fontSize: '1.25rem', fontWeight: '600' }}>
                                            {gameMode === 'human' 
                                                ? (currentPlayer === 'player1' ? "Your Turn" : "Computer's Turn")
                                                : (currentPlayer === 'player1' ? "COMPUTER1's Turn" : "COMPUTER2's Turn")
                                            }
                                        </span>
                                    )}
                                </div>

                                <button
                                    onClick={togglePause}
                                    disabled={gameMode === 'human' && currentPlayer === 'player1'}
                                    style={{
                                        display: 'flex',
                                        alignItems: 'center',
                                        gap: '0.5rem',
                                        padding: '0.75rem 1.5rem',
                                        borderRadius: '0.75rem',
                                        background: paused ? 'rgba(34,197,94,0.8)' : 'rgba(251,191,36,0.8)',
                                        color: 'white',
                                        border: 'none',
                                        cursor: (gameMode === 'human' && currentPlayer === 'player1') ? 'not-allowed' : 'pointer',
                                        fontSize: '1rem',
                                        fontWeight: '600',
                                        transition: 'all 0.3s',
                                        opacity: (gameMode === 'human' && currentPlayer === 'player1') ? 0.5 : 1
                                    }}
                                >
                                    {paused ? <Play size={20} /> : <Pause size={20} />}
                                    {paused ? 'Resume' : 'Pause'}
                                </button>
                            </div>

                            {message && (
                                <div style={{ textAlign: 'center', color: '#E9D5FF', marginBottom: '1rem', fontSize: '1.125rem' }}>
                                    {message}
                                </div>
                            )}

                            <div style={{
                                position: 'relative',
                                borderRadius: '1.5rem',
                                padding: '2rem',
                                boxShadow: '0 25px 50px -12px rgba(0,0,0,0.5)',
                                background: 'linear-gradient(135deg, #644023 16%, #7D5736, #826146)'
                            }}>
                                <div style={{ textAlign: 'center', marginBottom: '1.5rem' }}>
                                    <div style={{ color: '#22D3EE', fontSize: '1.5rem', fontWeight: 'bold' }}>
                                        {gameMode === 'human' ? 'Computer (Player 2)' : 'Player 2 (COMPUTER2)'}
                                    </div>
                                </div>

                                <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '1.5rem' }}>
                                    <div style={{ position: 'relative', width: '120px', height: '240px' }}>
                                        <div style={{ 
                                            position: 'absolute', 
                                            inset: 0, 
                                            background: 'rgba(0,0,0,0.4)', 
                                            borderRadius: '1.5rem',
                                            top: '5px'
                                        }}></div>
                                        <div style={{
                                            position: 'relative',
                                            background: 'linear-gradient(to bottom, #1a1a1a, #000)',
                                            borderRadius: '1.5rem',
                                            padding: '1rem',
                                            border: '4px solid #EF4444',
                                            display: 'flex',
                                            flexDirection: 'column',
                                            alignItems: 'center',
                                            justifyContent: 'center',
                                            height: '100%'
                                        }}>
                                            <div style={{ color: '#FFC107', fontSize: '0.875rem', marginBottom: '0.5rem' }}>S2</div>
                                            <div style={{ fontSize: '3rem', fontWeight: 'bold', color: '#FAF5E6' }}>{board[2]}</div>
                                            <div style={{ color: '#FFC107', fontSize: '0.75rem', marginTop: '0.5rem' }}>Score</div>
                                        </div>
                                    </div>

                                    <div style={{ flex: 1, margin: '0 1.5rem' }}>
                                        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(6, 1fr)', gap: '1rem', marginBottom: '2rem' }}>
                                            {['L', 'K', 'J', 'I', 'H', 'G'].map((pit) => (
                                                <div key={pit} style={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
                                                    <div style={{ color: '#FFC107', fontWeight: 'bold', marginBottom: '0.5rem', fontSize: '1.125rem' }}>{pit}</div>
                                                    <div style={{ position: 'relative', width: '96px', height: '96px' }}>
                                                        <div style={{ 
                                                            position: 'absolute', 
                                                            inset: 0, 
                                                            background: 'rgba(0,0,0,0.5)', 
                                                            borderRadius: '50%',
                                                            top: '4px'
                                                        }}></div>
                                                        <svg style={{ position: 'relative', width: '100%', height: '100%' }} viewBox="0 0 100 100">
                                                            <defs>
                                                                <radialGradient id={`pit-${pit}`}>
                                                                    <stop offset="0%" stopColor="#28140C" />
                                                                    <stop offset="100%" stopColor="#3C2A1E" />
                                                                </radialGradient>
                                                            </defs>
                                                            <circle cx="50" cy="50" r="48" fill={`url(#pit-${pit})`} stroke="#D4A024" strokeWidth="3" />
                                                            <text x="50" y="58" textAnchor="middle" fontSize="28" fontWeight="bold" fill="#FAF5E6">
                                                                {board[pit]}
                                                            </text>
                                                            <SeedDots count={board[pit]} />
                                                        </svg>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>

                                        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(6, 1fr)', gap: '1rem' }}>
                                            {['A', 'B', 'C', 'D', 'E', 'F'].map((pit) => (
                                                <div key={pit} style={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
                                                    <div 
                                                        style={{ 
                                                            position: 'relative', 
                                                            width: '96px', 
                                                            height: '96px', 
                                                            cursor: paused || (gameMode === 'human' && currentPlayer === 'player1' && board[pit] > 0) ? 'pointer' : 'default',
                                                            transition: 'transform 0.2s',
                                                            opacity: paused ? 0.6 : 1
                                                        }} 
                                                        onClick={() => handlePitClick(pit)}
                                                        onMouseEnter={(e) => {
                                                            if (!paused && gameMode === 'human' && currentPlayer === 'player1' && board[pit] > 0) {
                                                                e.currentTarget.style.transform = 'scale(1.05)';
                                                            }
                                                        }}
                                                        onMouseLeave={(e) => e.currentTarget.style.transform = 'scale(1)'}
                                                    >
                                                        <div style={{ 
                                                            position: 'absolute', 
                                                            inset: 0, 
                                                            background: 'rgba(0,0,0,0.5)', 
                                                            borderRadius: '50%',
                                                            top: '4px'
                                                        }}></div>
                                                        <svg style={{ position: 'relative', width: '100%', height: '100%' }} viewBox="0 0 100 100">
                                                            <defs>
                                                                <radialGradient id={`pit-${pit}-bottom`}>
                                                                    <stop offset="0%" stopColor="#28140C" />
                                                                    <stop offset="100%" stopColor="#3C2A1E" />
                                                                </radialGradient>
                                                            </defs>
                                                            <circle cx="50" cy="50" r="48" fill={`url(#pit-${pit}-bottom)`} stroke="#D4A024" strokeWidth="3" />
                                                            <text x="50" y="58" textAnchor="middle" fontSize="28" fontWeight="bold" fill="#FAF5E6">
                                                                {board[pit]}
                                                            </text>
                                                            <SeedDots count={board[pit]} />
                                                        </svg>
                                                    </div>
                                                    <div style={{ color: '#FFC107', fontWeight: 'bold', marginTop: '0.5rem', fontSize: '1.125rem' }}>{pit}</div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>

                                    <div style={{ position: 'relative', width: '120px', height: '240px' }}>
                                        <div style={{ 
                                            position: 'absolute', 
                                            inset: 0, 
                                            background: 'rgba(0,0,0,0.4)', 
                                            borderRadius: '1.5rem',
                                            top: '5px'
                                        }}></div>
                                        <div style={{
                                            position: 'relative',
                                            background: 'linear-gradient(to bottom, #1a1a1a, #000)',
                                            borderRadius: '1.5rem',
                                            padding: '1rem',
                                            border: '4px solid #10B981',
                                            display: 'flex',
                                            flexDirection: 'column',
                                            alignItems: 'center',
                                            justifyContent: 'center',
                                            height: '100%'
                                        }}>
                                            <div style={{ color: '#FFC107', fontSize: '0.875rem', marginBottom: '0.5rem' }}>S1</div>
                                            <div style={{ fontSize: '3rem', fontWeight: 'bold', color: '#FAF5E6' }}>{board[1]}</div>
                                            <div style={{ color: '#FFC107', fontSize: '0.75rem', marginTop: '0.5rem' }}>Score</div>
                                        </div>
                                    </div>
                                </div>

                                <div style={{ textAlign: 'center', marginTop: '1.5rem' }}>
                                    <div style={{ color: '#22D3EE', fontSize: '1.5rem', fontWeight: 'bold' }}>
                                        {gameMode === 'human' ? 'You (Player 1)' : 'Player 1 (COMPUTER1)'}
                                    </div>
                                </div>
                            </div>

                            {screen === 'gameover' && (
                                <div style={{
                                    position: 'fixed',
                                    inset: 0,
                                    background: 'rgba(0,0,0,0.8)',
                                    display: 'flex',
                                    alignItems: 'center',
                                    justifyContent: 'center',
                                    zIndex: 50
                                }}>
                                    <div style={{
                                        background: 'linear-gradient(to bottom right, #581C87, #6B21A8)',
                                        borderRadius: '1.5rem',
                                        padding: '3rem',
                                        maxWidth: '42rem',
                                        border: '4px solid #FFC107',
                                        boxShadow: '0 25px 50px -12px rgba(0,0,0,0.5)'
                                    }}>
                                        <h2 style={{
                                            fontSize: '3.75rem',
                                            fontWeight: 'bold',
                                            color: '#FFC107',
                                            textAlign: 'center',
                                            marginBottom: '1.5rem',
                                            textShadow: '0 0 30px rgba(255,191,0,0.5)'
                                        }}>
                                            GAME OVER
                                        </h2>
                                        <p style={{ color: 'white', fontSize: '1.875rem', textAlign: 'center', marginBottom: '2rem' }}>{winner}</p>
                                        <button
                                            onClick={() => setScreen('menu')}
                                            style={{
                                                width: '100%',
                                                padding: '1rem',
                                                borderRadius: '1rem',
                                                color: 'white',
                                                fontSize: '1.5rem',
                                                fontWeight: 'bold',
                                                border: 'none',
                                                cursor: 'pointer',
                                                background: 'linear-gradient(to right, #FFB800, #FF8C00)',
                                                boxShadow: '0 10px 40px rgba(255,184,0,0.4)',
                                                transition: 'all 0.3s'
                                            }}
                                        >
                                            New Game
                                        </button>
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>
                );
            }

            return null;
        };

        ReactDOM.render(<MancalaGame />, document.getElementById('root'));
    </script>

    <style>
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .sparkles {
            color: #FFC107;
            animation: pulse 2s ease-in-out infinite;
        }
        .icon-cyan {
            color: #22D3EE;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
    </style>
</body>
</html>